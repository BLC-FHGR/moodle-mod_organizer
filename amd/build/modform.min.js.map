{"version":3,"sources":["../src/modform.js"],"names":["define","$","instance","Modform","activateduedatecheckbox","init","param","warningdiv","parent","addClass","hide","on","e","isgrouporganizer","target","val","click","removeAttr","show","find","each","css","prop","groupmodeselect","init_gradechange","alert","changegradewarning"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package mod\n * @subpackage organizer\n * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * In mod_form: Force selection of grouping if group mode is choosen.\n */\n\n\ndefine(\n    ['jquery'], function($) {\n\n        /**\n     * @constructor\n     * @alias module:mod_organizer/modform\n     */\n        var Modform = function() {\n            this.activateduedatecheckbox = false;\n        };\n\n        var instance = new Modform();\n\n        instance.init = function(param) {\n\n            if (param.activateduedatecheckbox) {\n                this.activateduedatecheckbox = param.activateduedatecheckbox;\n            }\n            var warningdiv = $(\"#groupingid_warning\").parent().parent();\n            warningdiv.addClass('advanced');\n            warningdiv.hide();\n\n            function check_group_members_only(e) {\n                var isgrouporganizer = $(e.target);\n\n                if (isgrouporganizer.val() == 1) {\n                    $('#id_groupmode').val('1').click();\n                    $('#fitem_id_groupingid').removeAttr('hidden');\n                    $('#fitem_id_groupingid').show();\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'block');\n                        $(this).removeAttr('hidden');\n                    });\n                    $('#id_groupingid').removeAttr('disabled');\n                    warningdiv.show();\n                } else if (isgrouporganizer.val() == 0) {\n                    $('#id_groupmode').val('0').click();\n                    $('#fitem_id_groupingid').prop('hidden', true);\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'none');\n                        $(this).prop('hidden', true);\n                    });\n                    $('#id_groupingid').prop(\"disabled\", true);\n                    warningdiv.hide();\n                }\n            }\n\n            function check_group_mode(e) {\n                var groupmodeselect = $(e.target);\n\n                if (groupmodeselect.val() == 0) {\n                    $('#id_isgrouporganizer').val('0');\n                    $('#fitem_id_groupingid').hide();\n                    $('#id_groupingid').prop('disabled', 'disabled');\n                    warningdiv.hide();\n                }\n            }\n\n            $('#id_isgrouporganizer').on('change', check_group_members_only);\n            $('#id_groupmode').on('change', check_group_mode);\n\n            if (this.activateduedatecheckbox && !$('.error')) {\n                $('#id_duedate_enabled').click();\n            }\n        };\n\n        instance.init_gradechange = function(param) {\n            $('input[id^=id_grade]').on(\"change\", function() {\n                alert(param.changegradewarning);\n            });\n        };\n\n            return instance;\n\n    }\n);\n"],"file":"modform.min.js"}