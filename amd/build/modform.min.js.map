{"version":3,"file":"modform.min.js","sources":["../src/modform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @package mod\r\n * @subpackage organizer\r\n * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * In mod_form: Force selection of grouping if group mode is choosen.\r\n */\r\n\r\n\r\ndefine(\r\n    ['jquery'], function($) {\r\n\r\n        /**\r\n     * @constructor\r\n     * @alias module:mod_organizer/modform\r\n     */\r\n        var Modform = function() {\r\n            this.activateduedatecheckbox = false;\r\n        };\r\n\r\n        var instance = new Modform();\r\n\r\n        instance.init = function(param) {\r\n\r\n            if (param.activateduedatecheckbox) {\r\n                this.activateduedatecheckbox = param.activateduedatecheckbox;\r\n            }\r\n            var warningdiv = $(\"#groupingid_warning\").parent().parent();\r\n            warningdiv.addClass('advanced');\r\n            warningdiv.hide();\r\n\r\n            function check_group_members_only(e) {\r\n                var isgrouporganizer = $(e.target);\r\n\r\n                if (isgrouporganizer.val() == 1) {\r\n                    $('#id_groupmode').val('1').click();\r\n                    $('#fitem_id_groupingid').removeAttr('hidden');\r\n                    $('#fitem_id_groupingid').show();\r\n                    $('#fitem_id_groupingid').find().each(function() {\r\n                        $(this).css('display', 'block');\r\n                        $(this).removeAttr('hidden');\r\n                    });\r\n                    $('#id_groupingid').removeAttr('disabled');\r\n                    warningdiv.show();\r\n                } else if (isgrouporganizer.val() == 0) {\r\n                    $('#id_groupmode').val('0').click();\r\n                    $('#fitem_id_groupingid').prop('hidden', true);\r\n                    $('#fitem_id_groupingid').find().each(function() {\r\n                        $(this).css('display', 'none');\r\n                        $(this).prop('hidden', true);\r\n                    });\r\n                    $('#id_groupingid').prop(\"disabled\", true);\r\n                    warningdiv.hide();\r\n                }\r\n            }\r\n\r\n            function check_group_mode(e) {\r\n                var groupmodeselect = $(e.target);\r\n\r\n                if (groupmodeselect.val() == 0) {\r\n                    $('#id_isgrouporganizer').val('0');\r\n                    $('#fitem_id_groupingid').hide();\r\n                    $('#id_groupingid').prop('disabled', 'disabled');\r\n                    warningdiv.hide();\r\n                }\r\n            }\r\n\r\n            $('#id_isgrouporganizer').on('change', check_group_members_only);\r\n            $('#id_groupmode').on('change', check_group_mode);\r\n\r\n            if (this.activateduedatecheckbox && !$('.error')) {\r\n                $('#id_duedate_enabled').click();\r\n            }\r\n        };\r\n\r\n        instance.init_gradechange = function(param) {\r\n            $('input[id^=id_grade]').on(\"change\", function() {\r\n                alert(param.changegradewarning);\r\n            });\r\n        };\r\n\r\n            return instance;\r\n\r\n    }\r\n);\r\n"],"names":["define","$","instance","this","activateduedatecheckbox","init","param","warningdiv","parent","addClass","hide","on","e","isgrouporganizer","target","val","click","removeAttr","show","find","each","css","prop","init_gradechange","alert","changegradewarning"],"mappings":";;;;;;AA2BAA,+BACI,CAAC,WAAW,SAASC,GAMjB,IAIIC,SAAW,IAJD,WACVC,KAAKC,yBAA0B,GAgE/B,OA3DJF,SAASG,KAAO,SAASC,OAEjBA,MAAMF,0BACND,KAAKC,wBAA0BE,MAAMF,yBAEzC,IAAIG,WAAaN,EAAE,uBAAuBO,SAASA,SACnDD,WAAWE,SAAS,YACpBF,WAAWG,OAsCXT,EAAE,wBAAwBU,GAAG,UApC7B,SAAkCC,GAC9B,IAAIC,iBAAmBZ,EAAEW,EAAEE,QAEG,GAA1BD,iBAAiBE,OACjBd,EAAE,iBAAiBc,IAAI,KAAKC,QAC5Bf,EAAE,wBAAwBgB,WAAW,UACrChB,EAAE,wBAAwBiB,OAC1BjB,EAAE,wBAAwBkB,OAAOC,MAAK,WAClCnB,EAAEE,MAAMkB,IAAI,UAAW,SACvBpB,EAAEE,MAAMc,WAAW,aAEvBhB,EAAE,kBAAkBgB,WAAW,YAC/BV,WAAWW,QACsB,GAA1BL,iBAAiBE,QACxBd,EAAE,iBAAiBc,IAAI,KAAKC,QAC5Bf,EAAE,wBAAwBqB,KAAK,UAAU,GACzCrB,EAAE,wBAAwBkB,OAAOC,MAAK,WAClCnB,EAAEE,MAAMkB,IAAI,UAAW,QACvBpB,EAAEE,MAAMmB,KAAK,UAAU,MAE3BrB,EAAE,kBAAkBqB,KAAK,YAAY,GACrCf,WAAWG,OAElB,IAcDT,EAAE,iBAAiBU,GAAG,UAZtB,SAA0BC,GAGO,GAFPX,EAAEW,EAAEE,QAENC,QAChBd,EAAE,wBAAwBc,IAAI,KAC9Bd,EAAE,wBAAwBS,OAC1BT,EAAE,kBAAkBqB,KAAK,WAAY,YACrCf,WAAWG,OAElB,IAKGP,KAAKC,0BAA4BH,EAAE,WACnCA,EAAE,uBAAuBe,SAIjCd,SAASqB,iBAAmB,SAASjB,OACjCL,EAAE,uBAAuBU,GAAG,UAAU,WAClCa,MAAMlB,MAAMmB,wBAITvB,QAEd"}