function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_organizer/initinfobox",["jquery","core/config","core/log"],function(a,b,c){var d=new function Initinfobox(){this.student=0};d.init=function(e){d.student=e;function f(b){var c=a("#slot_overview tbody"),e=a("#show_past_slots").is(":checked"),f=a("#show_my_slots_only").is(":checked"),k=a("#show_free_slots_only").is(":checked"),l=a("#show_hidden_slots").is(":checked"),m=a("#show_registrations_only").is(":checked");c.find("tr").show();if(m){c.find("tr.not_registered").hide()}if(!d.student){if(!l){c.find("tr.unavailable").hide()}else{c.find("tr.not_unavailable").hide()}}if(!e){c.find("tr.past_due").hide()}else{c.find("tr.not_past_due").hide()}if(f){if(!d.student){c.find("tr.not_my_slot").hide()}}if(k){c.find("tr.not_free_slot").hide()}var n=a(".organizer_filtertable");if(n){var o=n.val().toUpperCase();if(o){var p=c.find("tr:visible:not(.info)"),q,r,s,t,u;for(q=0;q<p.length;q++){u=!1;s=p[q].getElementsByTagName("td");if(s){for(r=0;r<s.length;r++){t=h(s[r]);if(t){if(-1<t.toUpperCase().indexOf(o)){u=!0;break}}}}if(!u){a(p[q]).hide()}}}}c.show();g();if(b){i("mod_organizer_showhiddenslots",l);if(!d.student){i("mod_organizer_showmyslotsonly",f)}i("mod_organizer_showfreeslotsonly",k);i("mod_organizer_showpasttimeslots",e);i("mod_organizer_showregistrationsonly",m)}}function g(){var b=a("#slot_overview tbody"),c=b.find("tr:not(.info)"),d=0===c.length,e=!1;c.each(function(){if(!(0===a(this).css("offsetWidth")&&0===a(this).css("offsetHeight"))||"none"===a(this).css("display")){e=!0}});var f=a("#show_past_slots").is(":checked"),g=a("#show_my_slots_only").is(":checked");b.find("tr.info").hide();if(!e){if(d){b.find("tr.no_slots_defined").show()}else if(f&&!g){b.find("tr.no_slots").show()}else if(f&&g){b.find("tr.no_my_slots").show()}else{b.find("tr.no_due_slots").show()}}}function h(b){var c,d,e;d=a(b).clone().find("script,style").remove().end();c=d.text();if(!c){e=d.find("img:not(.icon)").first();var f=e.attr("alt");if(_typeof(f)!=="undefined"&&!1!==f){c=f}}return c}a("#show_past_slots").on("click",function(){f(!0)});a("#show_my_slots_only").on("click",function(){f(!0)});a("#show_free_slots_only").on("click",function(){f(!0)});a("#show_hidden_slots").on("click",function(){f(!0)});a("#show_registrations_only").on("click",function(){f(!0)});a(".organizer_filtertable").on("keyup",function(){f(!0)});f(!1);function i(d,e){a.get(b.wwwroot+"/lib/ajax/setuserpref.php",{sesskey:b.sesskey,pref:encodeURI(d),value:encodeURI(e)},"json").done(function(a){if("OK"!=a){c.error(a)}})}};return d});
//# sourceMappingURL=initinfobox.min.js.map
