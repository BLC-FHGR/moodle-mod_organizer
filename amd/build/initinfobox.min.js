function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)
/**
 * @package mod
 * @subpackage organizer
 * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */}define("mod_organizer/initinfobox",["jquery","core/config"],(function($,config){var instance=new function(){this.student=0,this.userid=0};return instance.init=function(participant,userid){function toggle_all_slots(event){var slotsviewoptions;null!=event&&(slotsviewoptions="",slotsviewoptions+=$("#show_my_slots_only").is(":checked")?"1":"0",slotsviewoptions+=$("#show_free_slots_only").is(":checked")?"1":"0",slotsviewoptions+=$("#show_hidden_slots").is(":checked")?"1":"0",slotsviewoptions+=$("#show_past_slots").is(":checked")?"1":"0",slotsviewoptions+=$("#show_registrations_only").is(":checked")?"1":"0",$.get(config.wwwroot+"/mod/organizer/slotsviewoptions.php",{sesskey:config.sesskey,slotsviewoptions:encodeURI(slotsviewoptions),userid:instance.userid},"json").done((function(data){"1"==data?alert("OK"):alert("NO")})));var tablebody=$("#slot_overview tbody"),showpastslots=$("#show_past_slots").is(":checked"),showmyslotsonly=$("#show_my_slots_only").is(":checked"),showfreeslotsonly=$("#show_free_slots_only").is(":checked"),showhiddenslots=$("#show_hidden_slots").is(":checked"),showregistrationsonly=$("#show_registrations_only").is(":checked");tablebody.find("tr").show(),showregistrationsonly&&tablebody.find("tr.not_registered").hide(),instance.student||showhiddenslots||tablebody.find("tr.unavailable").hide(),showpastslots||tablebody.find("tr.past_due").hide(),showmyslotsonly&&(instance.student||tablebody.find("tr.not_my_slot").hide()),showfreeslotsonly&&tablebody.find("tr.not_free_slot").hide();var target=$(".organizer_filtertable");if(target){var filter=target.val().toUpperCase();if(filter){var i,j,td,text,found,tr=tablebody.find("tr:visible:not(.info)");for(i=0;i<tr.length;i++){if(found=!1,td=tr[i].getElementsByTagName("td"))for(j=0;j<td.length;j++)if((text=extracttext(td[j]))&&text.toUpperCase().indexOf(filter)>-1){found=!0;break}found||$(tr[i]).hide()}}}tablebody.show(),function(){var tablebody=$("#slot_overview tbody"),noninforows=tablebody.find("tr:not(.info)"),noneexist=0===noninforows.length,anyvisible=!1;noninforows.each((function(){"none"!==$(this).css("display")&&(anyvisible=!0)}));var showpastslots=$("#show_past_slots").is(":checked"),showmyslotsonly=$("#show_my_slots_only").is(":checked");tablebody.find("tr.info").hide(),anyvisible||(noneexist?tablebody.find("tr.no_slots_defined").show():showpastslots&&!showmyslotsonly?tablebody.find("tr.no_slots").show():showpastslots&&showmyslotsonly?tablebody.find("tr.no_my_slots").show():tablebody.find("tr.no_due_slots").show())}()}function extracttext(element){var text,last;if(!(text=(last=$(element).clone().find("script,style").remove().end()).text())){var attr=last.find("img:not(.icon)").first().attr("alt");"undefined"!==_typeof(attr)&&!1!==attr&&(text=attr)}return text}instance.student=participant,instance.userid=userid,$("#show_past_slots").on("click",(function(){toggle_all_slots(event)})),$("#show_my_slots_only").on("click",(function(){toggle_all_slots(event)})),$("#show_free_slots_only").on("click",(function(){toggle_all_slots(event)})),$("#show_hidden_slots").on("click",(function(){toggle_all_slots(event)})),$("#show_registrations_only").on("click",(function(){toggle_all_slots(event)})),$(".organizer_filtertable").on("keyup",(function(){toggle_all_slots(event)})),toggle_all_slots()},instance}));

//# sourceMappingURL=initinfobox.min.js.map