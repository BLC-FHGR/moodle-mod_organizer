define(["jquery","core/log"],function(a,b){var c=function(){this.totalslots=0},d=new c;return d.init=function(c){d.totalslots=c.totalslots,d.lastslotid=new Array,a(".adddayslot").css("display","inline"),a("[id^=id_addday_]").on("click",function(){var c=a(this),e=c.attr("slot"),f=d.totalslots++,g=a("<fieldset>").append(c.closest("fieldset").clone()),h=g.clone();h.find(":button").first().remove(),h.append('<input name="newslots['+e+'][day]" value="'+e+'" type="hidden">');var i=g.find("fieldset").first(),j=h.find("fieldset").first();j.attr("id",i.attr("id")+"_"+f);var k=h.find("input, select");a.each(k,function(){var b=a(this).attr("id");if(b){var c=b.replace("newslots_"+e+"_","newslots_"+f+"_");a(this).attr("id",c)}var d=a(this).attr("name");if(d){var g=d.replace("newslots["+e+"]","newslots["+f+"]");a(this).attr("name",g)}}),k=h.find("label"),a.each(k,function(){var b=a(this).attr("for");if(b){var c=b.replace("newslots_"+e+"_","newslots_"+f+"_");a(this).attr("for",c)}});var l=i.parent(),m=l.find("fieldset").last();void 0!=d.lastslotid[e]?(a(d.lastslotid[e]).after(h),b.info("111","organizer")):(a("#"+m.attr("id")).after(h),b.info("222","organizer")),d.lastslotid[e]="#"+j.attr("id"),b.info(e,"organizer"),b.info(d.lastslotid[e],"organizer")})},d});