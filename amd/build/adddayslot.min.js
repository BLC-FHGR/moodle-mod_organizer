define(["jquery","core/log"],function(a,b){var c=function(){this.totalslots=0},d=new c;return d.init=function(c){d.totalslots=c.totalslots,b.info("totalslots:"+d.totalslots,"organizer"),a(".adddayslot").css("display","inline"),a("[id^=id_addday_]").on("click",function(){var c=a(this),e=c.attr("slot");b.info("oldslot: "+e,"organizer");var f=d.totalslots;b.info("newslot: "+f,"organizer"),d.totalslots++,b.info("totalslots: "+d.totalslots,"organizer");var g=c.closest("fieldset").clone(),h=g.clone();h.find(":button").first().remove(),h.append('<input name="newslots['+e+'][day]" value="'+e+'" type="hidden">');var i=g.find("fieldset").first(),j=h.find("fieldset").first();j.attr("id",i.attr("id")+"_1"),b.info("newfieldset ID: "+j.attr("id"),"organizer");var k=h.find("input, select");b.info("elements 1: "+k.length,"organizer");var l=0;a.each(k,function(){b.info("ix: "+l++,"organizer");var c=a(this).attr("id");if(c){b.info("oldid: "+c,"organizer");var d=c.replace("newslots_"+e+"_","newslots_"+f+"_");a(this).attr("id",d),b.info("newid: "+a(this).attr("id"),"organizer")}var g=a(this).attr("name");if(g){b.info("oldname: "+g,"organizer");var h=g.replace("newslots["+e+"]","newslots["+f+"]");a(this).attr("name",h),b.info("newname: "+a(this).attr("name"),"organizer")}}),k=h.find("label"),b.info("elements 2: "+k.length,"organizer"),l=0,a.each(k,function(){b.info("ix: "+l++,"organizer");var c=a(this).attr("for");if(c){b.info("oldfor: "+c,"organizer");var d=c.replace("newslots_"+e+"_","newslots_"+f+"_");a(this).attr("for",d),b.info("newfor: "+a(this).attr("for"),"organizer")}});var m=i.parent();b.info("LASTfieldset: "+m.html(),"organizer");var n=m.find("fieldset").last();b.info("LASTfieldsetfieldset ID: "+n.attr("id"),"organizer"),a("#"+n.attr("id")).after(h)})},d});